<%= content_for(:title, @user.first_name) %>

<article id="user">
  <header>
     <h1 style="text-align: center;"> My Timecard </h1>
  </header>

<% @clocked_products %>
<h4 style="text-align: center;color: #428bca; font-size: 15px;">Products I've Clocked ( <%= @clocked_products.size %> ) </h4>



<div class="row" style="margin-right: 0px; margin-left: 0px; margin-top: 20px;">
<div class="span12 centered-pills">
  <nav> 
<ul class="nav nav-pills" role="tablist">
  <li class="active" style="margin-right: 15px;"><%= link_to 'List View', user_path, :class => "user-nav" %></li>
  <li style="margin-left: 15px;"><%= link_to 'Image View', users_image_path, :class => "user-nav" %></li>
</ul>
</nav> 


<div style="height: 22px; width: 330px; background-color: rgb(86, 86, 86); position: absolute;border-radius: 4px;margin-left: auto;margin-right: auto;left: 0;right: 0;margin-top: 1px; ">
 <p style="padding-top: 1px; color: white"> SORT VIA </p>
 <div style="height: 22px; width: 330px; background-color: rgb(86, 86, 86); position: absolute;border-radius: 4px;margin-left: auto;margin-right: auto;left: 0;right: 0;margin-top: -3px; ">
  <p style="padding-left: 53px; padding-top: 1px; color: white"> <%= sortable "name", "Product Name" %> <span style="position: absolute; left: 180px;"> <%= sortable "releasing_on", "Release Date" %> </span style=""> </p>
</div>
</div>
</div>
</div>

<div class="container" style="padding-left: 75px;padding-right: 75px;">
<table class="table-timecard" style="width: 50%; position: absolute; margin-top: 76px; border-collapse: separate;border-spacing: 0 .7em; left: 0;" align="center">

  <thead >
      <caption>UPCOMING RELEASES & TBA</caption>
  </thead>
  <tbody>
   <% @clocked_products.upcoming.each do |product| %> 

      <tr style="height: 50px;">
        <td style="padding-top: 10.5px; position: absolute; left: 25px;"> 
          <% if @current_user.clocks.find_by(product_id: product.id) %> 
          <%= button_to product_clock_path(product, @current_user.clocks.find_by(product_id: product.id)), method: :delete do %> 
             <i class="glyphicon glyphicon-time" style= "color:red;"> </i>
          <% end %>           
          <% end %> 
        </td>



        <td style="cursor: pointer;background-color: rgb(87, 87, 87);border-radius: 8px; padding-left: 15px; position: absolute; left: 75px; height: 35px; width: 325px; color: white; padding-top: 7px;" data-link="<%= product_path(product) %>"> <%= product.name %> 

  </td>  

        <td style="cursor: pointer;background-color: rgb(167, 205, 249);border-radius: 8px; text-align: center; position: absolute; left: 300px; height: 35px; width: 190px; padding-top: 7px;" data-link="<%= product_path(product) %>"> <span style="color: black;"> <%= format_releasing_on(product) %> - </span>  <span style="color: red;"> <%= format_releasing_on_remaining(product) %> </span>  
       </td>   



      </tr>
    <% end %>
  </tbody>





  <thead>

  </thead>

  <tbody>
   <% @clocked_products.tba.each do |product| %> 

      <tr style="height: 50px;">
        <td style="padding-top: 10.5px; position: absolute; left: 25px;"> 
          <% if @current_user.clocks.find_by(product_id: product.id) %> 
          <%= button_to product_clock_path(product, @current_user.clocks.find_by(product_id: product.id)), method: :delete do %> 
             <i class="glyphicon glyphicon-time" style= "color:red;"> </i>
          <% end %>           
          <% end %> 
        </td>



        <td style="cursor: pointer;background-color: rgb(87, 87, 87);border-radius: 8px; padding-left: 15px; position: absolute; left: 75px; height: 35px; width: 325px; color: white; padding-top: 7px;" data-link="<%= product_path(product) %>"> <%= product.name %> 

  </td>  

        <td style="cursor: pointer;background-color: rgb(167, 205, 249);border-radius: 8px; text-align: center; position: absolute; left: 300px; height: 35px; width: 190px; padding-top: 7px;" data-link="<%= product_path(product) %>"> <span style="color: black;"> <%= format_releasing_on(product) %> - </span>  <span style="color: red;"> <%= format_releasing_on_remaining(product) %> </span>  
       </td>   



      </tr>
    <% end %>
  </tbody>
</table>
</table>



</div>




<table class="table-timecard" style="position: absolute; right: 10px; top: 275px; width: 50%; margin-top: 25px; border-collapse: separate;
    border-spacing: 0 .7em;" align="center">


  <thead>
   <caption>ALREADY OUT</caption>
  </thead>
  <tbody>
   <% @clocked_products.past.reverse.each do |product| %> 

      <tr style="height: 50px;">
        <td style="padding-top: 10.5px; position: absolute; left: 25px;"> 
          <% if @current_user.clocks.find_by(product_id: product.id) %> 
          <%= button_to product_clock_path(product, @current_user.clocks.find_by(product_id: product.id)), method: :delete do %> 
             <i class="glyphicon glyphicon-time" style= "color:red;"> </i>
          <% end %>           
          <% end %> 
        </td>



        <td style="cursor: pointer;background-color: rgb(87, 87, 87);border-radius: 8px; padding-left: 15px; position: absolute; left: 75px; height: 35px; width: 325px; color: white; padding-top: 7px;" data-link="<%= product_path(product) %>"> <%= product.name %> 

  </td>  

        <td style="cursor: pointer;background-color: rgb(167, 205, 249);border-radius: 8px; text-align: center; position: absolute; left: 300px; height: 35px; width: 190px; padding-top: 7px;" data-link="<%= product_path(product) %>"> <span style="color: black;"> <%= format_releasing_on(product) %> - </span>  <span style="color: red;"> <%= format_releasing_on_remaining(product) %> </span>  
       </td>   



      </tr>
    <% end %>
  </tbody>
</table>
</div>










</article>



<script>
$(function() {
  return $(document).on('click', 'td[data-link]', function(evt) {
    return window.location = this.dataset.link;
  });
});
</script>

